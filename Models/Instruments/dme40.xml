<PropertyList>

  <path>dme40.ac</path>

  <effect>
    <condition>
      <greater-than>
        <property>sim/version/flightgear</property>
        <value>3.4.999</value>
      </greater-than>
    </condition>
    <inherits-from>Aircraft/Citation/Models/Effects/interior-shadow/citationII-interior-flightdeck</inherits-from>
    <object-name>DME.bezel</object-name>
    <object-name>DME.display</object-name>
    <object-name>DME.invalid</object-name>
    <object-name>DME.dot</object-name>
    <object-name>DME.dim.knob</object-name>
    <object-name>DME.mode.knob</object-name>
    <object-name>DME.nav.knob</object-name>
    <object-name>DME.test</object-name>
    <object-name>DME.NM.1</object-name>
    <object-name>DME.NM1</object-name>
    <object-name>DME.NM10</object-name>
    <object-name>DME.NM100</object-name>
    <object-name>DME.kt1</object-name>
    <object-name>DME.kt10</object-name>
    <object-name>DME.kt100</object-name>
    <object-name>DME.min1</object-name>
    <object-name>DME.min10</object-name>
    <object-name>DME.min100</object-name>
  </effect>

  <effect>
    <inherits-from>Effects/model-transparent</inherits-from>
    <object-name>DME.glass</object-name>
  </effect>

  <animation>
    <type>select</type>
    <object-name>DME.invalid</object-name>
    <condition>
      <and>
        <property>systems/electrical/outputs/dme[0]</property>
        <property>instrumentation/dme[0]/switch-position[1]</property>
        <not><property>instrumentation/dme[0]/in-range</property></not>
      </and>
    </condition>
  </animation>

  <animation>
    <type>select</type>
    <object-name>DME.dot</object-name>
    <object-name>DME.NM.1</object-name>
    <object-name>DME.NM1</object-name>
    <object-name>DME.NM10</object-name>
    <object-name>DME.NM100</object-name>
    <condition>
      <and>
        <property>systems/electrical/outputs/dme[0]</property>
        <property>instrumentation/dme[0]/in-range</property>
        <property>instrumentation/dme[0]/switch-position[1]</property>
      </and>
    </condition>
  </animation>

  <animation>
    <type>select</type>
    <object-name>DME.NM10</object-name>
    <condition>
      <greater-than>
        <property>instrumentation/dme[0]/indicated-distance-nm</property>
        <value>9.999</value>
      </greater-than>
    </condition>
  </animation>

  <animation>
    <type>select</type>
    <object-name>DME.NM100</object-name>
    <condition>
      <greater-than>
        <property>instrumentation/dme[0]/indicated-distance-nm</property>
        <value>99.999</value>
      </greater-than>
    </condition>
  </animation>

  <animation>
    <type>select</type>
    <object-name>DME.min1</object-name>
    <object-name>DME.min10</object-name>
    <object-name>DME.min100</object-name>
    <condition>
      <and>
        <property>systems/electrical/outputs/dme[0]</property>
        <property>instrumentation/dme[0]/in-range</property>
        <equals>
          <property>instrumentation/dme[0]/switch-position[1]</property>
          <value>1</value>
        </equals>
      </and>
    </condition>
  </animation>

  <animation>
    <type>select</type>
    <object-name>DME.min10</object-name>
    <condition>
      <greater-than>
        <property>instrumentation/dme[0]/indicated-time-min-display</property>
        <value>9.9</value>
      </greater-than>
    </condition>
  </animation>

  <animation>
    <type>select</type>
    <object-name>DME.min100</object-name>
    <condition>
      <greater-than>
        <property>instrumentation/dme[0]/indicated-time-min-display</property>
        <value>99.9</value>
      </greater-than>
    </condition>
  </animation>

  <animation>
    <type>select</type>
    <object-name>DME.kt1</object-name>
    <object-name>DME.kt10</object-name>
    <object-name>DME.kt100</object-name>
    <condition>
      <and>
        <property>systems/electrical/outputs/dme[0]</property>
        <property>instrumentation/dme[0]/in-range</property>
        <equals>
          <property>instrumentation/dme[0]/switch-position[1]</property>
          <value>2</value>
        </equals>
      </and>
    </condition>
  </animation>

  <animation>
    <type>select</type>
    <object-name>DME.kt10</object-name>
    <condition>
      <greater-than>
        <property>instrumentation/dme[0]/indicated-ground-speed-kt</property>
        <value>9.999</value>
      </greater-than>
    </condition>
  </animation>

  <animation>
    <type>select</type>
    <object-name>DME.kt100</object-name>
    <condition>
      <greater-than>
        <property>instrumentation/dme[0]/indicated-ground-speed-kt</property>
        <value>99.999</value>
      </greater-than>
    </condition>
  </animation>

  <animation>
    <type>textranslate</type>
    <object-name>DME.NM100</object-name>
    <property>instrumentation/dme[0]/indicated-distance-nm</property>
    <factor>0.001</factor>
    <step>100</step>
    <bias>0.05</bias>
    <axis>
      <x>0</x>
      <y>1</y>
      <z>0</z>
    </axis>
  </animation>

  <animation>
    <type>textranslate</type>
    <object-name>DME.NM10</object-name>
    <property>instrumentation/dme[0]/indicated-distance-nm</property>
    <factor>0.01</factor>
    <step>10</step>
    <bias>0.05</bias>
    <axis>
      <x>0</x>
      <y>1</y>
      <z>0</z>
    </axis>
  </animation>

  <animation>
    <type>textranslate</type>
    <object-name>DME.NM1</object-name>
    <property>instrumentation/dme[0]/indicated-distance-nm</property>
    <factor>0.1</factor>
    <step>1</step>
    <bias>0.05</bias>
    <axis>
      <x>0</x>
      <y>1</y>
      <z>0</z>
    </axis>
  </animation>

  <animation>
    <type>textranslate</type>
    <object-name>DME.NM.1</object-name>
    <property>instrumentation/dme[0]/indicated-distance-nm</property>
    <factor>1.0</factor>
    <step>0.1</step>
    <bias>0.05</bias>
    <axis>
      <x>0</x>
      <y>1</y>
      <z>0</z>
    </axis>
  </animation>

  <!-- minutes -->
  <animation>
    <type>textranslate</type>
    <object-name>DME.min100</object-name>
    <property>instrumentation/dme[0]/indicated-time-min-display</property>
    <factor>0.001</factor>
    <step>100</step>
    <bias>0.5</bias>
    <axis>
      <x>0</x>
      <y>1</y>
      <z>0</z>
    </axis>
  </animation>

  <animation>
    <type>textranslate</type>
    <object-name>DME.min10</object-name>
    <property>instrumentation/dme[0]/indicated-time-min-display</property>
    <factor>0.01</factor>
    <step>10</step>
    <bias>0.5</bias>
    <axis>
      <x>0</x>
      <y>1</y>
      <z>0</z>
    </axis>
  </animation>

  <animation>
    <type>textranslate</type>
    <object-name>DME.min1</object-name>
    <property>instrumentation/dme[0]/indicated-time-min-display</property>
    <factor>0.1</factor>
    <step>1</step>
    <bias>0.5</bias>
    <axis>
      <x>0</x>
      <y>1</y>
      <z>0</z>
    </axis>
  </animation>

  <!-- groundspeed -->
  <animation>
    <type>textranslate</type>
    <object-name>DME.kt100</object-name>
    <property>instrumentation/dme[0]/indicated-ground-speed-kt</property>
    <factor>0.001</factor>
    <step>100</step>
    <bias>0.5</bias>
    <axis>
      <x>0</x>
      <y>1</y>
      <z>0</z>
    </axis>
  </animation>

  <animation>
    <type>textranslate</type>
    <object-name>DME.kt10</object-name>
    <property>instrumentation/dme[0]/indicated-ground-speed-kt</property>
    <factor>0.01</factor>
    <step>10</step>
    <bias>0.5</bias>
    <axis>
      <x>0</x>
      <y>1</y>
      <z>0</z>
    </axis>
  </animation>

  <animation>
    <type>textranslate</type>
    <object-name>DME.kt1</object-name>
    <property>instrumentation/dme[0]/indicated-ground-speed-kt</property>
    <factor>0.1</factor>
    <step>1</step>
    <bias>0.5</bias>
    <axis>
      <x>0</x>
      <y>1</y>
      <z>0</z>
    </axis>
  </animation>

  <animation>
    <type>knob</type>
    <object-name>DME.nav.knob</object-name>
    <property>instrumentation/dme[0]/switch-position[0]</property>
    <min>0</min>
    <max>2</max>
    <interpolation>
      <entry><ind>0</ind><dep>0</dep></entry>
      <entry><ind>1</ind><dep>30</dep></entry>
      <entry><ind>2</ind><dep>60</dep></entry>
    </interpolation>
    <center>
      <x-m>0.0050</x-m>
      <y-m>-0.027</y-m>
      <z-m>-0.027</z-m>
    </center>
    <axis>
      <x>-1</x>
      <y>0</y>
      <z>0</z>
    </axis>
    <action>
      <binding>
        <command>property-adjust</command>
        <property>instrumentation/dme[0]/switch-position[0]</property>
        <factor>1</factor>
        <min>0</min>
        <max>2</max>
        <wrap>false</wrap>
      </binding>
      <binding>
        <command>nasal</command>
        <script>
          var tst=getprop("instrumentation/dme[0]/switch-position[0]");
          if(tst==0){
            setprop("instrumentation/dme[0]/frequencies/source",
                    "/instrumentation/nav[0]/frequencies/selected-mhz")
          }elsif(tst==1){
            setprop("instrumentation/dme[0]/frequencies/source",
                    "/instrumentation/dme[0]/frequencies/selected-mhz")
          }elsif(tst==2){
            setprop("instrumentation/dme[0]/frequencies/source",
                    "/instrumentation/nav[1]/frequencies/selected-mhz")
          }
        </script>
      </binding>
      <binding>
        <command>property-assign</command>
        <property>instrumentation/dme[0]/in-range</property>
        <value>false</value>
      </binding>
    </action>
    <hovered>
      <binding>
        <command>set-tooltip</command>
        <tooltip-id>DME-source</tooltip-id>
        <label>DME source: %s</label>
        <mapping>nasal</mapping>
        <script>
          var modes = ['NAV1', 'HOLD', 'NAV2'];
          return modes[arg[0]];
        </script>
        <property>instrumentation/dme[0]/switch-position[0]</property>
      </binding>
    </hovered>
  </animation>

  <animation>
    <type>knob</type>
    <object-name>DME.mode.knob</object-name>
    <property>instrumentation/dme[0]/switch-position[1]</property>
    <min>0</min>
    <max>2</max>
    <interpolation>
      <entry><ind>0</ind><dep>0</dep></entry>
      <entry><ind>1</ind><dep>30</dep></entry>
      <entry><ind>2</ind><dep>60</dep></entry>
    </interpolation>
    <center>
      <x-m>0.0050</x-m>
      <y-m>0.027</y-m>
      <z-m>-0.027</z-m>
    </center>
    <axis>
      <x>-1</x>
      <y>0</y>
      <z>0</z>
    </axis>
    <action>
      <binding>
        <command>property-adjust</command>
        <property>instrumentation/dme[0]/switch-position[1]</property>
        <factor>1</factor>
        <min>0</min>
        <max>2</max>
        <wrap>false</wrap>
      </binding>
    </action>
    <hovered>
      <binding>
        <command>set-tooltip</command>
        <tooltip-id>DME-mode</tooltip-id>
        <label>DME mode: %s</label>
        <mapping>nasal</mapping>
        <script>
          var modes = ['OFF', 'minutes', 'Kts'];
          return modes[arg[0]];
        </script>
        <property>instrumentation/dme[0]/switch-position[1]</property>
      </binding>
    </hovered>
  </animation>

  <animation>
    <type>knob</type>
    <object-name>DME.dim.knob</object-name>
    <property>controls/lighting/dme-dim</property>
    <factor>300</factor>
    <center>
      <x-m>0.0050</x-m>
      <y-m>-0.0280</y-m>
      <z-m>0.0280</z-m>
    </center>
    <axis>
      <x>-1</x>
      <y>0</y>
      <z>0</z>
    </axis>
    <action>
      <binding>
        <command>property-adjust</command>
        <property>controls/lighting/dme-dim</property>
        <factor>0.04</factor>
        <min>0</min>
        <max>1</max>
        <wrap>false</wrap>
      </binding>
    </action>
    <hovered>
      <binding>
        <command>set-tooltip</command>
        <tooltip-id>dme-dim</tooltip-id>
        <label>Dimming: %d%%</label>
        <mapping>percent</mapping>
        <property>controls/lighting/dme-dim</property>
      </binding>
    </hovered>
  </animation>

  <!-- Panel Lights (only with Rembrandt disabled) -->
  <animation>
    <type>material</type>
    <condition>
      <not>
        <property>sim/rendering/rembrandt/enabled</property>
      </not>
    </condition>
    <object-name>DME.bezel</object-name>
    <object-name>DME.dim.knob</object-name>
    <object-name>DME.mode.knob</object-name>
    <object-name>DME.nav.knob</object-name>
    <object-name>DME.test</object-name>
    <emission>
      <red>1.0</red>
      <green>0.8</green>
      <blue>0.6</blue>
      <factor-prop>controls/lighting/panel-average-lighting</factor-prop>
    </emission>
  </animation>

  <!-- dimable lights -->
  <!-- Implement emis animation even for Rembrandt rendering! -->
  <animation>
    <type>material</type>
    <object-name>DME.invalid</object-name>
    <object-name>DME.dot</object-name>
    <object-name>DME.NM.1</object-name>
    <object-name>DME.NM1</object-name>
    <object-name>DME.NM10</object-name>
    <object-name>DME.NM100</object-name>
    <object-name>DME.kt1</object-name>
    <object-name>DME.kt10</object-name>
    <object-name>DME.kt100</object-name>
    <object-name>DME.min1</object-name>
    <object-name>DME.min10</object-name>
    <object-name>DME.min100</object-name>
    <emission>
      <red>1.0</red>
      <green>1.0</green>
      <blue>1.0</blue>
      <factor-prop>controls/lighting/dme-dim</factor-prop>
    </emission>
  </animation>

</PropertyList>

