<?xml version="1.0"?>
<!--
Filters that compute the behavior of the systems on the Citation II.
Copyright (C) 2017 sascha ReiÃŸner <reiszner@novaplan.at>

This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 2 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.
-->
<PropertyList>

    <filter>
        <name>ignition-left</name>
        <debug>false</debug>
        <type>gain</type>
        <input>
            <condition>
                <or>
                    <property>controls/engines/engine[0]/ignition-sw</property>
                    <property>controls/engines/engine[0]/ignition-auto</property>
                </or>
            </condition>
            <value>1</value>
        </input>
        <output>controls/engines/engine[0]/ignition</output>
    </filter>

    <filter>
        <name>ignition-right</name>
        <debug>false</debug>
        <type>gain</type>
        <input>
            <condition>
                <or>
                    <property>controls/engines/engine[1]/ignition-sw</property>
                    <property>controls/engines/engine[1]/ignition-auto</property>
                </or>
            </condition>
            <value>1</value>
        </input>
        <output>controls/engines/engine[1]/ignition</output>
    </filter>

    <filter>
        <name>speedbrake-power</name>
        <debug>false</debug>
        <type>gain</type>
        <input>
            <condition>
                <and>
                    <greater-than>
                        <property>systems/electrical/outputs/bus/left</property>
                        <value>20</value>
                    </greater-than>
                    <property>controls/electric/circuit-breakers/bus-left/cb-sys-speed-brake</property>
                </and>
            </condition>
            <property>controls/flight/speedbrake-switch</property>
        </input>
        <input>0</input>
        <output>controls/flight/speedbrake-switch</output>
    </filter>

    <filter>
        <name>antiskid-test</name>
        <debug>false</debug>
        <type>gain</type>
        <input>
            <condition>
                <and>
                    <greater-than>
                        <property>controls/gear/antiskid-test</property>
                        <value>0</value>
                    </greater-than>
                    <greater-than>
                        <expression>
                            <sum>
                                <property>controls/gear/antiskid-test</property>
                                <value>4</value>
                            </sum>
                        </expression>
                        <property>sim/time/elapsed-sec</property>
                    </greater-than>
                </and>
            </condition>
            <property>controls/gear/antiskid-test</property>
        </input>
        <input>0</input>
        <output>controls/gear/antiskid-test</output>
    </filter>

    <filter>
        <name>antiskid</name>
        <debug>false</debug>
        <type>gain</type>
        <input>
            <condition>
                <and>
                    <greater-than>
                        <property>systems/electrical/outputs/bus/left</property>
                        <value>20</value>
                    </greater-than>
                    <property>controls/electric/circuit-breakers/bus-left/cb-sys-skid-ctrl</property>
                    <property>controls/gear/antiskid-sw</property>
                    <less-than>
                        <property>controls/gear/antiskid-test</property>
                        <value>1</value>
                    </less-than>
                </and>
            </condition>
            <value>1</value>
        </input>
        <input>0</input>
        <output>controls/gear/antiskid</output>
    </filter>

</PropertyList>
